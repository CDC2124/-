# 生产需求规划系统故障排除指南

## matplotlib相关问题

如果您在运行应用程序时遇到与matplotlib相关的错误，请尝试以下解决方案：

### 问题1: 找不到matplotlib模块

**错误信息**:
```
No module named 'matplotlib'
```

**解决方案**:
1. 运行`安装依赖.bat`脚本安装所有依赖
2. 或者手动安装matplotlib:
   ```
   pip install matplotlib
   ```

### 问题2: matplotlib绘图错误

**错误信息**:
```
ArrowInvalid: Could not convert dtype('<M8[ns]') with type numpy.dtypes.DateTime64DType
```

**解决方案**:
1. 确保安装了最新版本的matplotlib和pandas:
   ```
   pip install --upgrade matplotlib pandas
   ```
2. 重新启动应用程序

### 问题3: 图表显示问题

**错误信息**:
图表无法正确显示或显示为空白

**解决方案**:
1. 确保安装了所有依赖库:
   ```
   pip install matplotlib seaborn plotly
   ```
2. 如果使用远程连接，确保启用了X11转发或使用`--server.headless true`选项启动Streamlit:
   ```
   streamlit run app.py --server.headless true
   ```

## 其他常见问题

### 问题4: Streamlit启动失败

**错误信息**:
```
No module named 'streamlit'
```

**解决方案**:
1. 运行`安装依赖.bat`脚本
2. 或者手动安装streamlit:
   ```
   pip install streamlit
   ```

### 问题5: 无法访问应用程序

**症状**:
应用程序已启动，但无法通过浏览器访问

**解决方案**:
1. 确认应用程序正在运行，终端中应显示类似以下信息:
   ```
   You can now view your Streamlit app in your browser.
   Local URL: http://localhost:8501
   ```
2. 尝试使用不同的浏览器访问
3. 检查防火墙设置，确保允许本地网络连接

### 问题6: 数据加载错误

**症状**:
上传数据时出现错误或示例数据无法加载

**解决方案**:
1. 确保数据文件格式正确(CSV或Excel)
2. 检查数据文件是否包含所需的所有字段
3. 确保`data/samples`目录中存在示例数据文件

## 联系支持

如果您尝试了上述解决方案但问题仍然存在，请联系技术支持:
- 📧 prodplanning@example.com

请在联系支持时提供以下信息:
1. 错误信息的完整截图或文本
2. 操作系统版本
3. Python版本(`python --version`命令的输出)
4. 您尝试执行的操作